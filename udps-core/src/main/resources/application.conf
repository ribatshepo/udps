seri {
  mode = "standalone"
  mode = ${?SERI_MODE}

  integrations {
    uccp {
      enabled = false
      enabled = ${?SERI_UCCP_ENABLED}
      host = "localhost"
      host = ${?SERI_UCCP_HOST}
      port = 50000
      port = ${?SERI_UCCP_PORT}
      tls {
        enabled = true
        cert-path = ""
        key-path = ""
        ca-path = ""
      }
      circuit-breaker {
        enabled = true
        failure-threshold = 5
        reset-timeout-ms = 30000
        half-open-max-calls = 3
      }
      timeout-ms = 5000
      retry {
        max-attempts = 3
        backoff-ms = 1000
      }
    }
    usp {
      enabled = false
      enabled = ${?SERI_USP_ENABLED}
      host = "localhost"
      host = ${?SERI_USP_HOST}
      port = 50005
      port = ${?SERI_USP_PORT}
      tls {
        enabled = true
        cert-path = ""
        key-path = ""
        ca-path = ""
      }
      circuit-breaker {
        enabled = true
        failure-threshold = 5
        reset-timeout-ms = 30000
        half-open-max-calls = 3
      }
      timeout-ms = 5000
      retry {
        max-attempts = 3
        backoff-ms = 1000
      }
    }
  }
}

udps {
  service {
    name = "udps"
    version = "1.0.0"
  }

  grpc {
    host = "0.0.0.0"
    host = ${?UDPS_GRPC_HOST}
    port = 50060
    port = ${?UDPS_GRPC_PORT}
    max-message-size = 104857600  # 100MB
  }

  https {
    host = "0.0.0.0"
    host = ${?UDPS_HTTPS_HOST}
    port = 8443
    port = ${?UDPS_HTTPS_PORT}
  }

  metrics {
    host = "0.0.0.0"
    host = ${?UDPS_METRICS_HOST}
    port = 9090
    port = ${?UDPS_METRICS_PORT}
  }

  health {
    host = "0.0.0.0"
    host = ${?UDPS_HEALTH_HOST}
    port = 8081
    port = ${?UDPS_HEALTH_PORT}
  }

  database {
    host = ${UDPS_DB_HOST}
    port = 5432
    port = ${?UDPS_DB_PORT}
    name = ${UDPS_DB_NAME}
    user = ${UDPS_DB_USER}
    password = ${UDPS_DB_PASSWORD}
    max-pool-size = 20
    max-pool-size = ${?UDPS_DB_MAX_POOL_SIZE}
  }

  minio {
    endpoint = ${UDPS_MINIO_ENDPOINT}
    access-key = ${UDPS_MINIO_ACCESS_KEY}
    secret-key = ${UDPS_MINIO_SECRET_KEY}
    bucket = "udps-archive"
    bucket = ${?UDPS_MINIO_BUCKET}
  }

  kafka {
    bootstrap-servers = ${UDPS_KAFKA_BOOTSTRAP_SERVERS}
    group-id = "udps-consumer-group"
    group-id = ${?UDPS_KAFKA_GROUP_ID}
    auto-offset-reset = "earliest"
  }

  redis {
    host = ${UDPS_REDIS_HOST}
    port = 6379
    port = ${?UDPS_REDIS_PORT}
  }

  tls {
    enabled = true
    enabled = ${?UDPS_TLS_ENABLED}
    cert-path = "/etc/udps/tls/tls.crt"
    cert-path = ${?UDPS_TLS_CERT_PATH}
    key-path = "/etc/udps/tls/tls.key"
    key-path = ${?UDPS_TLS_KEY_PATH}
    ca-path = "/etc/udps/tls/ca.crt"
    ca-path = ${?UDPS_TLS_CA_PATH}
  }

  storage {
    hot-path = "/data/udps/hot"
    hot-path = ${?UDPS_STORAGE_HOT_PATH}
    warm-path = "/data/udps/warm"
    warm-path = ${?UDPS_STORAGE_WARM_PATH}
    cold-path = "/data/udps/cold"
    cold-path = ${?UDPS_STORAGE_COLD_PATH}
    default-compression = "zstd"
    default-compression = ${?UDPS_DEFAULT_COMPRESSION}
    default-row-group-size = 134217728  # 128MB
    worker-threads = 8
    worker-threads = ${?UDPS_STORAGE_WORKER_THREADS}
  }

  query {
    max-concurrent-queries = 100
    max-concurrent-queries = ${?UDPS_MAX_CONCURRENT_QUERIES}
    default-timeout = 30s
    query-cache-size = 10000
    query-cache-size = ${?UDPS_QUERY_CACHE_SIZE}
  }

  tracing {
    endpoint = ${UDPS_TRACING_ENDPOINT}
    service-name = "udps"
  }
}
